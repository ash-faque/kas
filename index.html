<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KA Stores</title>
  <link rel="manifest" href="site.webmanifest">
  <link rel="stylesheet" href="/resource/style.css">
</head>
<body>
    <!-- NAV BAR -->
    <div id="head">
        <h1>KA Store!</h1>
        <h2>Market Rates</h2>
    </div>
    <!-- LOOKOUTS -->
    <div id="look-me">
        <marquee behavior="scoll" scrolldelay='100' direction="left">😷always wear mask in public places</marquee>
        <marquee behavior="scoll" scrolldelay='150' direction="left">✨wash your hands frequently</marquee>
        <marquee behavior="scoll" scrolldelay='200' direction="left">🙊❌avoid touching on your face</marquee>
    </div>
    <!--  MARKET RATES ULS -->
    <div id="ratesTable">
        <div class="container">
            <h3>grains<span>🌰🌾</span></h3>
            <ul class="collection" id="grains"></ul>
        </div>
        <div class="container">
            <h3>vegetables<span>🍅🍆</span></h3>
            <ul class="collection" id="vegetables"></ul>
        </div>
        <div class="container">
            <h3>fruits<span>🍌🍎</span></h3>
            <ul class="collection" id="fruits"></ul>
        </div>
        <div class="container">
            <h3>meat & dairy<span>🐏🍖</span></h3>
            <ul class="collection" id="dairy"></ul>
        </div>
        <div class="container">
            <h3>oils<span>🛢🕊</span></h3>
            <ul class="collection" id="oils"></ul>
        </div>
        <div class="container">
            <h3>others<span>🚬🍨</span></h3>
            <ul class="collection" id="others"></ul>
        </div>
    </div>
    <!-- AD PANAL -->
    <div id="ad">
    </div>
    <!-- GET RATE -->
    <div>
        <button onclick="triggerFetch();" id="getrate">⚡</button>
    </div>
    <!-- FOOT BAR -->
    <div id="foot">
        <p>Contents in this web page are not at all licenced.</p>
        <p>Created By <a class="glob-links" target="blank" href="https://ashfaqueblathur.github.io">Ashfaque Blathur</a></p>
        <p>Hosted at <a class="glob-links" target="blank" href="https://pages.github.com">Github Pages</a></p>
        <p>Freeloads on <a class="glob-links" target="blank" href="https://firebase.google.com/">Firebase</a> for data hosting</p>
        <div class="pro-links-div">
            <a class="pro-links" href="/merch/">edit rates</a>
            <a class="pro-links" href="/classifides/">kas classifides (β)</a>
        </div> 
    </div>
    <!-- TOAST -->
    <p id="toastBlock"></p>
    <!--- SCRIPTS -->
    <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.6.0/firebase-functions.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyByn4MyBo7waIVfJ3PZFm1QG2DpzBY0Ubg",
        authDomain: "ka-store-3f22a.firebaseapp.com",
        databaseURL: "https://ka-store-3f22a.firebaseio.com",
        projectId: "ka-store-3f22a",
        storageBucket: "ka-store-3f22a.appspot.com",
        messagingSenderId: "664972737373",
        appId: "1:664972737373:web:3216e4363d322d2acec6b4",
        measurementId: "G-EHMEBQVN1S"
      };
      firebase.initializeApp(config);
      // make auth and firestore references
      const db = firebase.firestore();  
      // update firestore settings
      db.settings({ timestampsInSnapshots: true });
      firebase.firestore().enablePersistence().catch(function(err) {
            if (err.code == 'failed-precondition') {
            console.log('Multiple tabs open, persistence can only be enabled in one tab at a a time.');
            } else if (err.code == 'unimplemented') {
            console.log('The current browser does not support all of the features required to enable persistence');
            }
        });
    </script>
    <script src="/resource/index.js"></script>
    <script>
         // service worker registration
         if ("serviceWorker" in navigator) {
                window.addEventListener("load", () => {
                    navigator.serviceWorker.register("sw.js").then(swReg => { }).catch(err => {
                        console.error('Service Worker Error', err);
                    });
                });
            }
    </script>
</body>
</html>